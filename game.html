<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>露營小知識</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.js"></script> 
    <script src="./vender/vue.min.js"></script>
    <script src="./vender/jquery/jquery-3.5.1.min.js"></script>
    <script src="./js/main.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="./pic/commom/browser.ico">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- header開始-->
    <header >
    <div class="forphone">
    <button class="hamburger hamburger--spring" type="button">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>
    </div>
    <nav class="wrap_nav">
        <div class="nav_logo">
            <a class="logo_link -bottom">
                <img class="desk sun" src="./pic/commom/sun.svg" alt="">
            </a>
            <a class="changelogo" href="./shansen.html">
            <img class="phone" src="./pic/commom/phone_header.svg">
            </a>
            <div class="middle_bg"></div>
            <a href="./shansen.html" class="logo_link -up">
                <img class="desk" src="./pic/commom/pc_header.svg">
            </a>
        </div>
        <div class="nav_list">
            <ul >
                <li><a class="nav_title @@underline_01" href="./group.html">揪團露營</a></li>
                <li><a class="nav_title @@underline_02" href="./equipment.html">設備交換</a></li>
                <li><a class="nav_title @@underline_03" href="./camping.html">營區攻略</a></li>
                <li><a class="nav_title @@underline_04" href="./letter.html">來去寫信</a></li>
                <li><a class="nav_title orange2" href="./aboutus.html">關於我們</a></li>
                <li><a href="./member.html" id="header_memName">&nbsp;</a>
                    <a class="nav_title @@underline_06" id="spanLogin">登入|註冊</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

    <section class="section_001 bgcColor">
        <div class="wrap">
            <div class="title game_title">
                露營小知識
            </div>
            <div class="third_title game_title_word">
                挑戰露營知識智慧王!趕緊來玩吧~!
            </div>
        </div>
      </section>
    
      <div class="game_table bgcColor p">
        <form action="#">
           <div class="qawrap">
            <div class="qa sub_title game_title_question01" style="opacity:0;">
                <h2 id="question">
                  Q1:請問露營時遇到熊怎麼辦?   
                </h2>
            </div>
            
    
            <!-- answerBox -->
            <div class="answerBox" id="answerBox" >
                <div class="box ans1 game_button_01" id="ans1" style="opacity:0;">
                  <button class="mainbtn2 myMOUSE choice" id="game_button_answer01"> A:爬到樹上</button>   
                </div>
                <div class="box ans2 game_button_02" id="ans2" style="opacity:0;">
                  <div class="img"></div>
                  <div class="text">
                    <button class="mainbtn2 myMOUSE choice" id="game_button_answer02"> B:躺在地上裝死</button>                   
                  </div>
                </div>
                <div class="box ans3 game_button_03" id="ans3" style="opacity:0;">
                  <div class="img"></div>
                  <div class="text">
                    <button class="mainbtn2 myMOUSE choice" id="game_button_answer03">C:與熊搏鬥</button>
                  </div>
                </div>
            </div>
          </form>
        </div> 
    
      <div class="rightBox" style="opacity:0">
          <img src="./pic/game/rightpicc.svg">
      </div>
    
    
      <div class="wrongBox" style="opacity:0">
          <img src="./pic/game/wrongpicc.svg" alt="">
      </div>
        
      <div class="scoreWindow" style="opacity: 0;"> 
        <div class="game_final_img">
            <div class="pic_small_block">
                <img src="./pic/game/game_final.svg">
            </div>
                <a style="text-decoration: none;margin-bottom:10px;" href="group.html"> 
                  <button class="thirdbtn1_green from_group">一起來揪團露營!GO~!</button>
                </a>
                <br>
                <a style="text-decoration: none;margin-bottom:10px;" href="game.html"> 
                  <button class="thirdbtn1_green from_game">再玩一次!</button>
                </a>
          </div> 
        </div>
      </div> <!-- scoreWindow end -->
    </div> 
    
    
    
    
    <script>
    var count = 0;
        function init() {
        askQuestion();
      }
     
      function askQuestion() {
        main();
      }
      
      window.addEventListener("load", function(){
       
        let xhr = new XMLHttpRequest();
        //---------------
        // QUE_TITLE
        // QUE_OPT1
        // QUE_OPT2
        // QUE_OPT3
        // QUE_ANS
        // QUE_STATUS
        //---------------
        xhr.onload = function(){
          questions = JSON.parse(xhr.responseText);
          console.log("//--------------");
          console.log(questions);
          console.log("//--------------");
          init();
        }
        xhr.open("get", "php/game/getQuestion.php",false);
        xhr.send(null);
      })
    
    
      ////////////////////變數設定開始////////////////////
      //背景圖片
      var background = ["", "", ""];
      //問題
      var questions;
      //答案
      var ans = ["", "", "", "", ""];
      var img = [
        ["", "", ""], //ans=1
        ["", "", ""], //ans=2
        ["", "", ""], //ans=3
        ["", "", ""], //ans=4
        ["", "", ""], //ans=5
      ];
    
      ////////////////////電腦動畫開始////////////////////
      function main() { //執行函式
    
        $('#question').text(questions[count][0]); //換qa的題目
        $('#ans1 img').attr("src", `./images/${img[count][0]}`); 
        $('#ans2 img').attr("src", `./images/${img[count][1]}`); 
        $('#ans3 img').attr("src", `./images/${img[count][2]}`); 
      
        $('#ans1 button').text(questions[count][1]); //換ans1的文字
        $('#ans2 button').text(questions[count][2]); //換ans2的文字
        $('#ans3 button').text(questions[count][3]); //換ans3的文字
      
      
        smallgameIn(); //進場動畫
      }
      //判斷正確及錯誤
      $('.choice').click(function (e) {
          e.preventDefault();
          if($(this).hasClass("-disabled")){
            }else{
              $('#game_button_answer01').addClass("-disabled");
              $('#game_button_answer02').addClass("-disabled");
              $('#game_button_answer03').addClass("-disabled");
        let ansIndex = questions[count][4];
          if ($(this).text() == questions[count][ansIndex]) {
              // console.log("test1")
              rightOut(); //正確動畫
            } else {
              // console.log("test2");
              wrongOut(); //錯誤動畫
            }
          }
          
      });
    
      //此處判斷答題次數，小於5次重複答題，大於5次接結算畫面
      function pcEnd() {
         count++;
         console.log(count)
        if (count < 5) {
          $('#game_button_answer01').removeClass("-disabled");
          $('#game_button_answer02').removeClass("-disabled");
          $('#game_button_answer03').removeClass("-disabled");
          main()
        } else {
          score(); //呼叫結算畫面
          $('.scoreWindow').css("pointerEvents", "auto");
        }
       
      }
      //結算畫面
      function score() {
        var score = new TimelineMax({});
        score.to('.scoreWindow', .5, {
          css: {
            opacity: 1
          }
        })
      }
      
      function smallgame() {
        TweenMax.to('.bw', 1, {
          repeat: -1,
          rotation: 360,
          ease: Power0.easeNone,
        });
        TweenMax.to('.fw', 1, {
          repeat: -1,
          rotation: 360,
          ease: Power0.easeNone,
        });
        TweenMax.to('.smallgame', .25, {
          x: (screen.width) - 420,
          ease: Power0.easeNone,
        });
      }
      
      ///動畫js///
      function smallgameIn() {
        smallgame();
        var pcMmoveIn = new TimelineMax({});
        pcMmoveIn.to('.qa', .1, {
          css: {
            opacity: 1
          }
        }).to('.ans1', .25, {
          delay: 0,
          css: {
            opacity: 1,
          }
        }).to('.ans2', .25, {
          delay: 0,
          css: {
            opacity: 1,
          }
        }).to('.ans3', .25, {
          delay: 0,
          css: {
            opacity: 1,
          }
        }).to('.bw', .1, {
          rotation: 0
        }).to('.fw', .1, {
          rotation: 0,
        })
      }
      
      //答對畫面顯示
      function rightBoxShow() {
        var rightBoxIn = new TimelineMax({});
      
        rightBoxIn.to('.rightBox', 2, {
          css: {
            opacity: 1,
            delay: .2
          },
        }).to('.rightBox', 1, {
          css: {
            delay: .2,
            opacity: 0,
          }
        })
      }
    
    
    
    
    
    
      //答題正確,顯示答對畫面
      function rightOut() {
        var rightToOut = new TimelineMax({});
        rightToOut.to('.rightBox', 0.25, {
          css: {
            onComplete: rightBoxShow,
            opacity: 0
          }
        }).to('.qa', .3, {
          css: {
            opacity: 0,
          }
        }).to('.fw', .5, {
          delay: 1,
          rotation: 360,
          repeat: -1,
          ease: Power0.easeNone,
        }).to('.bw', .5, {
          repeat: -1,
          rotation: 360,
          ease: Power0.easeNone,
        }).to('.ans1', .3, {
          css: {
            opacity: 0,
          }
        }).to('.ans2', .2, {
          css: {
            opacity: 0,
          }
        }).to('.ans3', .1, {
          css: {
            opacity: 0,
          }
        }).to('.smallgame', .5, {
          x: 2500,
          y: 0,
          opacity: 0,
        }).to('.smallgame', .5, {
          opacity: 1,
          startAt: {
            x: 300
          },
          onComplete: pcEnd
        })
      }
      
      //答錯畫面顯示
      function wrongBoxShow() {
        var wrongBoxIn = new TimelineMax({});
        wrongBoxIn.to('.wrongBox', 2, {
          css: {
            opacity: 1,
            delay: .2
          },
        }).to('.wrongBox', 1, {
          css: {
            delay: .2,
            opacity: 0,
          }
        })
      }
      //答題錯誤,顯示答錯畫面
      function wrongOut() {
        var wrongToOut = new TimelineMax({});
        wrongToOut.to('.wrongBox', 1, {  //答錯畫面顯示框框
          css: {
            onComplete: wrongBoxShow,
            opacity: 0
          }
        }).to('.qa', .3, {
          css: {
            opacity: 0,
          }
        }).to('.ans1', .3, {
          css: {
            opacity: 0,
          }
        }).to('.ans2', .3, {
          css: {
            opacity: 0,
          }
        }).to('.ans3', .3, {
          css: {
            opacity: 0,
          }
        }).to('.fw', .2, {
          delay: .2,
          rotation: 360,
          ease: Power0.easeNone,
          repeat: -1,
        }).to('.bw', .2, {
          repeat: -1,
          rotation: 360,
          ease: Power0.easeNone,
        }).to('.smallgame', .5, { //換題時間
          x: 2500,
          y: 0,
          opacity: 0,
        }).to('ㄈ', .5, { //換題時間
          opacity: 1,
          startAt: {
            x: 300
          },
          onComplete: pcEnd
          //onComplete: function(){
            //console.log("here");
          //}
        })
      }
      
      ////////////////////電腦動畫結束////////////////////
    
    </script>
</body>
</html>