<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>營區攻略</title>
    <script src="https://npmcdn.com/leaflet@0.7.7/dist/leaflet.js"></script>
    <script src="./vender/jquery/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="https://npmcdn.com/leaflet@0.7.7/dist/leaflet.css" />
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="./pic/commom/browser.ico">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    @@include('./layout/header.html', { "underline_03": "orange2" })
    <!-- 燈箱開始 -->
    @@include('./layout/login.html')
    <!-- 燈箱結束 -->
    <div class="bgcColor page">

    <section class="section0">
        <div class="wrap">
            <div class="title">營區攻略</div>
            <div class="breadcrumbs">
                <ul>
                    <li><a href="./shansen.html"  class="level0 green1">首頁</a></li>
                    <li class="level0 gray1">營區攻略</li>
                </ul>
            </div>
            <div class="waethermap camping_block">
                <div id="weatherbox">
                    <div class="sub_title">尋找營區</div>
                    <div class="weather">
                        <div class="weathernow">
                            <!-- 地區搜尋 -->
                            <div class="search_area">
                                <div class="weatherselect">
                                    <p>
                                        <label class="third_title" for="">選擇地區:</label>
                                        <select class="selectstyle" name="area" id="area" 
                                            onChange="doNewMaster( document.getElementById( 'area' ), 
                                            document.getElementById( 'campSpot' ) );">
                                        </select>
                                    </p>
                                    <p>
                                        <label class="third_title" for="">選擇營地:</label>
                                        <select class="selectstyle" name="campSpot" id="campSpot" >
                                        </select>
                                    </p>
                                </div>
                            </div>
                                
                            <!-- 溫度、降雨、濕度 -->
                            <div class="infos">
                                <div class="NowT infosbox">
                                    <p class="title" id="NowT"></p>
                                    <div class="TtoT">
                                        <span id=MinT></span>~
                                        <span id=MaxT></span>
                                    </div>
                                </div>
                                <div class="PoP infosbox">
                                    降雨機率
                                    
                                    <p id="PoP"></p>
                                </div>
                                <div class="RH infosbox">
                                    相對溼度
                                    <p id="RH"></p>
                                </div>
                            </div>
                            <!-- 未來一周 -->
                            <div class="weatherweek">
                                <div class="day1 week">
                                    <p class="day" id="date1"></p>
                                    <p class="temp" id="Ttop1"></p>
                                    <p class="temp" id="Tlow1"></p>
                                </div>
                                <div class="day2 week">
                                    <p class="day" id="date2"></p>
                                    <p class="temp" id="Ttop2"></p>
                                    <p class="temp" id="Tlow2"></p>
                                </div>
                                <div class="day3 week">
                                    <p class="day" id="date3"></p>
                                    <p class="temp" id="Ttop3"></p>
                                    <p class="temp" id="Tlow3"></p>
                                </div>
                                <div class="day4 week">
                                    <p class="day" id="date4"></p>
                                    <p class="temp" id="Ttop4"></p>
                                    <p class="temp" id="Tlow4"></p>
                                </div>
                                <div class="day5 week">
                                    <p class="day" id="date5"></p>
                                    <p class="temp" id="Ttop5"></p>
                                    <p class="temp" id="Tlow5"></p>
                                </div>
                                <div class="day6 week">
                                    <p class="day" id="date6"></p>
                                    <p class="temp" id="Ttop6"></p>
                                    <p class="temp" id="Tlow6"></p>
                                </div>
                                <div class="day7 week">
                                    <p class="day" id="date7"></p>
                                    <p class="temp" id="Ttop7"></p>
                                    <p class="temp" id="Tlow7"></p>
                                </div>
                            </div>
        
                            </div>
        
                            <!-- 氣象描述 -->
                            <div class="weatherdesc">
                                <p id="weatherp" class="level1"></p><br>
                                <div class="level1">更新時間：<span class="nowTime" id="nowTime"></span>
                                </div>
                            </div>
                        </div>
                </div>
                
                <div id="map" class="map"></div>
            </div>
        </div>
    </section>

    <section class="section_hot" id="section_hot">
        <div class="wrap">
            <div class="title">熱門營區</div>
            <a id="hot_camp_link0" href="">
                <div class="popular_area camping_block">
                    <div class="hot">
                        <p class="white">熱門景點</p>
                    </div>
                        <div class="area_pic">
                            <img id="hot_camp_img0" src="./pic/camping/北1-1.jpg" alt="">
                        </div>
                        <div class="area_info">
                            <div class="sub_title" id="hot_camp_name0">
                                <div class="third_title coll_num">收藏數：888</div>
                            </div>
                            <div class="level1" id="hot_camp_inner0"></div>

                            <div class="third_title lineheight">聯絡資訊</div>
                            <div class="level1" id="hot_camp_address"></div>
                            
                            <div class="third_title lineheight">相關設備</div>
                            <div class="level1" id="hot_camp_facility"></div>
                    
                    
                        </div>
                </div>
            </a>

        <div class="wrap">
            <div class="other_popular_area">
                <div class="card camping_block">
                    <div class="content">
                        <a id="hot_camp_link1" href="https://www.google.com">
                            <img id="hot_camp_img1">
                            <div class="sub_title" id="hot_camp_name1"></div>
                            <div class="level1 ellipsis" id="hot_camp_inner1"></div>
                        </a>
                    </div>
                </div>
                <div class="card camping_block">
                    <div class="content">
                        <a id="hot_camp_link2" href="">
                            <img id="hot_camp_img2">
                            <div class="sub_title" id="hot_camp_name2"></div>
                            <div class="level1 ellipsis" id="hot_camp_inner2"></div>
                        </a>
                    </div>
                </div>
                <div class="card camping_block">
                    <div class="content">
                        <a id="hot_camp_link3" href="">
                            <img id="hot_camp_img3">
                            <div class="sub_title" id="hot_camp_name3"></div>
                            <div class="level1 ellipsis" id="hot_camp_inner3"></div>
                        </a>
                    </div>
                </div>
                <div class="card camping_block">
                    <div class="content">
                        <a id="hot_camp_link4" href="">
                            <img id="hot_camp_img4">
                            <div class="sub_title" id="hot_camp_name4"></div>
                            <div class="level1 ellipsis" id="hot_camp_inner4"></div>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section  class="camppart">
        <div class="wrap">
            <div class="title">近期揪團</div>
            <div class="camping_block currently_gruop">
                <div class="gMainGroups" id="gMainGroups">
                </div>
                <a href="./group.html"><button class="secondbtn1">看更多精選</button></a>
            </div>
        </div>
    </section>

    </div>

<!-- footer 開始-->
@@include('./layout/footer.html')
<!-- footer 結束-->
<script>
function $id(id){
    return document.getElementById(id);
}
var hotspotxhr = new XMLHttpRequest();
    hotspotxhr.onload = function(){
        if( hotspotxhr.status == 200 ){
            showhotspot(hotspotxhr.responseText);
        }else{
        console.log( hotspotxhr.status );
        }
    }
hotspotxhr.open("Get", "php/camping/camping1.php", true);
hotspotxhr.send( null );

function showhotspot(json){
    hotspotDatas = JSON.parse(json);
    for(let i=0 ; i<5 ; i++){
        // console.log(hotspotDatas[i]);
        let likeID = "hot_camp_name"+i;
        let likeInner = "hot_camp_inner"+i;
        let likeImg = "hot_camp_img"+i;
        let likeLink = "hot_camp_link"+i;
        $id(likeID).innerText = hotspotDatas[i].CAM_NAME;
        $id(likeInner).innerText = hotspotDatas[i].CAM_INTRODUCTION;
        $id(likeImg).src = `./pic/camping/camping_spot_img/${hotspotDatas[i].CAM_PIC1}.jpg`;
        $id(likeLink).href=`camping2.html?${hotspotDatas[i].CAM_NO}`;
    }
    $id('hot_camp_address').innerText = hotspotDatas[0].CAM_ADDRESS;
    $id('hot_camp_facility').innerText = hotspotDatas[0].CAM_FACILITY;

   console.log(hotspotDatas[0].CAM_FACILITY)
    
}
</script>
<script>
    //團
    let groupxhr = new XMLHttpRequest();
    groupxhr.onload = function(){
        if(groupxhr.status == 200){ //success
            showgroups(groupxhr.responseText);
        }else{ //error
            alert(groupxhr.status);
        }
    }
    groupxhr.open("get", "./php/group/groupindex.php", true);
    groupxhr.send(null);
    function showgroups(jason){
        groupDatas = JSON.parse(jason);
        let grouparrleng=0;
        if(groupDatas.length > 4){
            grouparrleng=4;
        }
        else{
            grouparrleng=groupDatas.length;
        }   
        let gMainGroups = document.getElementById(`gMainGroups`);
        console.log(gMainGroups);
        
        for(let i =0; i< grouparrleng ; i++){
            let linkGroup =  document.createElement("a");
            linkGroup.href = `./groupInfo.html?GROUP_NO=${groupDatas[i].GROUP_NO}`;
            gMainGroups.appendChild(linkGroup);
            let gMainGroup =  document.createElement("div");
            gMainGroup.className = "gMainGroup";
            linkGroup.appendChild(gMainGroup);
            let pic =  document.createElement("div");
            pic.className = "img";
            gMainGroup.appendChild(pic);
            let img =  document.createElement("img");
            img.src="./pic/group/"+groupDatas[i].GROUP_PIC1;
            pic.appendChild(img);
            let gMainGroupInfo =  document.createElement("div");
            gMainGroupInfo.className = "gMainGroupInfo";
            gMainGroup.appendChild(gMainGroupInfo);
            let gMainName =  document.createElement("div");
            gMainName.className = "gMainName level2 green1";
            gMainName.innerText = groupDatas[i].GROUP_NAME;
            gMainGroupInfo.appendChild(gMainName);
            let gMaindate =  document.createElement("div");
            gMaindate.className = "level1 orange1";
            gMaindate.innerText = "開團日期:" + groupDatas[i].GROUP_START_DATE;
            gMainGroupInfo.appendChild(gMaindate);

        } 
    }

</script>

<script src="./js/logintext.js"></script>
<script src="https://unpkg.com/jquery"></script>
<script src="./js/map.js"></script>
<script src="./js/main.js"></script>
<script src="./js/weather.js"></script>
<script src="./js/currentlygroup.js"></script>



</body>
</html>