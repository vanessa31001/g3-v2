<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="CAM_NAME_brower"></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.js"></script> 
    <script src="./vender/jquery/jquery-3.5.1.min.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/logintext.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="./pic/commom/browser.ico">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
<!-- header開始-->
@@include('./layout/header.html', { "underline_03": "orange2" })
  <!-- 燈箱開始 -->
  @@include('./layout/login.html')
  <!-- 燈箱結束 -->
    <div class="bgcColor page">
        <section class="section1">
            <div class="wrap">
                <div class="title">營區攻略</div>
                <div class="breadcrumbs">
                    <ul>
                        <li><a href="./index.html"  class="level0 green1">首頁</a></li>
                        <li><a href="./camping.html"  class="level0 green1">營區攻略</a></li>
                        <li class="level0 gray1" id="CAM_NAME_title"></li>
                    </ul>
                </div>
                <div class="location camping_block">
                    <div class="titlearea">
                        <div class="sub_title">
                            <span name="CAM_NAME" id="CAM_NAME"></span>
                            <div class=" like">
                                <button onclick="addLike()"; class="collect_btn">
                                    <img src="./pic/icon/like.png">
                                </button>
                                <span class="level1">收藏</span>
                            </div>
                        </div>
                    </div>
                    <div id="sliderBoard" class="camp_slider">
                        <ul id="content">
                            <li><img id="camping_pic_1" class="image"></li>
                            <li><img id="camping_pic_2" class="image"></li>
                            <li><img id="camping_pic_3" class="image"></li>
                        </ul>
                        <ul id="contentButton">
                            <!-- <li class="clickMe"></li>
                            <li></li>
                            <li></li>
                            <li></li> -->
                        </ul>
                    </div>
                    <div class="introduction">
                        <div class="text">
                            <div class="sub_title">營地介紹</div>
                            <div class="level1" id="CAM_INTRODUCTION"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
        <section class="camppart">
            <div class="wrap">
                <div class="title">營地資訊</div>
                <div class="location_inf camping_block">
                    <div class="content">
                        <div class="location_map">
                            <img class="location__layout" id="camping_pic_4" alt="">
                        </div>
                        <div class="location_text">
                            <div class="sub_title">說明</div>
                            <div class="text">
                                <div class="third_title">海拔</div>
                                <div class="level1" id="CAM_ALTITUDE"></div>
                            </div>
                            <div class="text">
                                <div class="third_title">衛浴配置</div>
                                <div class="level1" id="CAM_BATHROOM"></div>
                            </div>
                            <div class="text">
                                <div class="third_title">攜帶寵物</div>
                                <div class="level1" id="CAM_PET">不可攜帶寵物</div>
                            </div>
                            <div class="text">
                                <div class="third_title">附屬設施</div>
                                <div class="level1" id="CAM_FACILITY"></div>
                            </div>
                            <div class="text">
                                <div class="third_title">地址</div>
                                <div class="level1" id="CAM_ADDRESS"></div>
                            </div>
                        </div>
                    </div>
                    <fieldset class="note">
                        <legend class="third_title text">注意事項</legend>
                        <div class="level1" id="CAM_PRECAUTIONS">
                        </div>
                    </fieldset>
                </div>
            </div>
        </section>

        <section class="section2 bgcColor gray1 linkgroup">
            <div class="wrap">
                <div class="title">
                    探訪相似的揪團景點
                </div>

                <div class="gMainGroups">
                    <a href="./groupInfo.html">
                        <div class="gMainGroup">
                            <div class="img">
                                <img src="./pic/group/G1.jpg" alt="找不到照片">
                            </div>
                            <div class="gMainGroupInfo">
                                <div class="gMainName level2 green1">
                                    五寶露營鎮盟
                                </div>
                                <div class="level1 orange1">開團日期:2020-10-30</div>
                            </div>
                        </div>
                    </a>
                    <a href="./groupInfo.html">
                        <div class="gMainGroup">
                            <div class="img">
                                <img src="./pic/group/G1.jpg" alt="找不到照片">
                            </div>
                            <div class="gMainGroupInfo">
                                <div class="gMainName level2 green1">
                                    五寶露營鎮盟
                                </div>
                                <div class="level1 orange1">開團日期:2020-10-30</div>
                            </div>
                        </div>
                    </a>
                    <a href="./groupInfo.html">
                        <div class="gMainGroup">
                            <div class="img">
                                <img src="./pic/group/G1.jpg" alt="找不到照片">
                            </div>
                            <div class="gMainGroupInfo">
                                <div class="gMainName level2 green1">
                                    五寶露營鎮盟
                                </div>
                                <div class="level1 orange1">開團日期:2020-10-30</div>
                            </div>
                        </div>
                    </a>
                    <a href="./groupInfo.html">
                        <div class="gMainGroup">
                            <div class="img">
                                <img src="./pic/group/G1.jpg" alt="找不到照片">
                            </div>
                            <div class="gMainGroupInfo">
                                <div class="gMainName level2 green1">
                                    五寶露營鎮盟
                                </div>
                                <div class="level1 orange1">開團日期:2020-10-30</div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="linktogroupbtn">
                    <a href="./group.html"><button class="secondbtn1">查看更多</button></a>
                </div>
            </div>
        </section>

    </div>
<!-- footer 開始-->
@@include('./layout/footer.html')
<!-- footer 結束-->


<!-- ajax抓資料 -->
<script>
function $id(id){
return document.getElementById(id);
}
let CAM_NO;
window.addEventListener('load',function(){
    CAM_NO = location.href.split('?')[1];
    // spotNum(CAM_NO);
})



let spotNum = (CAM_NO) => {
    // console.log(CAM_NO)
    var xhr1 = new XMLHttpRequest();
    xhr1.onload = function(){
        if( xhr1.status == 200 ){
        let camping = JSON.parse(xhr1.responseText);
        console.log(camping);
        $id("CAM_NAME_brower").innerText = camping.CAM_NAME;
        $id("CAM_NAME_title").innerText = camping.CAM_NAME;
        $id("CAM_NAME").innerText = camping.CAM_NAME;
        $id("camping_pic_1").src = `./pic/camping/camping_spot_img/${camping.CAM_PIC1}.jpg`;
        $id("camping_pic_2").src = `./pic/camping/camping_spot_img/${camping.CAM_PIC2}.jpg`;
        $id("camping_pic_3").src = `./pic/camping/camping_spot_img/${camping.CAM_PIC3}.jpg`;
        $id("camping_pic_4").src = `./pic/camping/camping_spot_img/${camping.CAM_PIC4}.jpg`;
        $id("CAM_INTRODUCTION").innerText = camping.CAM_INTRODUCTION;
        $id("CAM_ALTITUDE").innerText = camping.CAM_ALTITUDE;
        $id("CAM_BATHROOM").innerText = camping.CAM_BATHROOM;
        if(camping.CAM_PET == 1){
            $id("CAM_PET").innerText="可以帶寵物";
        }else{
            $id("CAM_PET").innerText ="不可以帶寵物";
        };
        $id("CAM_FACILITY").innerText = camping.CAM_FACILITY;
        $id("CAM_ADDRESS").innerText = camping.CAM_ADDRESS;
        $id("CAM_PRECAUTIONS").innerText = camping.CAM_PRECAUTIONS;
    }else{
    console.log( xhr1.status );
    }
}

    var url = `php/camping/camping2.php?cam_no=${CAM_NO}`;
    xhr1.open("Get", url, true);
    xhr1.send( null );
}
</script> 
<script>

    function addLike(){
        alert(CAM_NO);
        let camping_no = this.camping[0].camping_no;
        console.log(camping_no);
    let addlikexhr = new XMLHttpRequest();

    addlikexhr.onload = function() {
        member = JSON.parse(addlikexhr.responseText);
        if (member.mem_id) {
            //已經登入了，可以開始做事了
            var xhr = new XMLHttpRequest();
            xhr.onload = function(e) {
                if (xhr.status == 200) { //連線成功
                    console.log(xhr.responseText);
                } else {
                    swal(xhr.status);
                }
            }
            var url = "php/common/addlike.php";
            xhr.open("post", url, true);
            xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded")
            let data = `CAM_NO=${CAM_NO}`;
            xhr.send(data);

            // if ($(".heart").attr('src') === "./images/icons/icon_heart.svg") {
            //     $(".heart").attr("src", "./images/icons/icon_heart_h&c.svg");
            // } else {
            //     $(".heart").attr("src", "./images/icons/icon_heart.svg");
            // }
        } else {
            //沒有登入，請先登入
            alret("請先登入")
        }
    }
    addlikexhr.open("get", "php/common/getMemberInfo.php", true);
    addlikexhr.send(null);
}
    

</script>

<!-- 圖片自動輪播 -->
<script>
    $(document).ready(function () {
    let divWidth = $('#sliderBoard').width();
    let imgCount = $('#content li').length;
    // alert(imgCount);

    for (let i = 0; i < imgCount; i++) {
        $('#contentButton').append('<li></li>');
    }
    $('#contentButton li:nth-child(1)').addClass('clickMe');

    $('#content').width(divWidth * imgCount); //ul的寬度
    $('#content li').width(divWidth); //li的寬度

    let index;
    $('#contentButton li').click(function () {
        index = $(this).index();

        $('#content').animate({
            left: divWidth * index * -1,
        });

        $(this).addClass('clickMe');
        $('#contentButton li').not(this).removeClass('clickMe');
    });


    //自動輪播
    index = 0;

    setInterval(function () {

        $('#content').animate({
            left: divWidth * index * -1,
        });

        $('#contentButton li').removeClass('clickMe');

        let btn = $("#contentButton li")[index];
        
        
        $(btn).addClass('clickMe');
        index++
        if(index >= imgCount){
            index = 0;
        }

    }, 2000)

    //視窗調整
    $(window).resize(function(){
        let boardWidth = $('#sliderBoard').width();
        $('#content img').css('width',boardWidth)
    })
});
// console.log(addLike);
</script>
<!-- <script src=".js/like.js"></script> -->

</body>
</html>

